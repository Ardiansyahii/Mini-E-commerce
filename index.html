<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toko Online E-Commerce</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        /* Font utama untuk seluruh body */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #212529;
            line-height: 1.6;
        }
        
        /* Font untuk judul, subjudul, dan elemen penting */
        h1, h2, h3 {
            font-family: 'Poppins', sans-serif;
        }

        /* Gaya modal kustom */
        .modal {
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .modal-content {
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md p-4 sticky top-0 z-50">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between">
            <a href="#" id="home-link" class="text-3xl font-bold text-indigo-600 mb-2 md:mb-0 transform transition-transform hover:scale-105">TokoKita</a>
            
            <!-- Breadcrumbs -->
            <nav id="breadcrumbs" class="text-sm font-medium text-gray-500 hidden md:block">
                <span class="breadcrumb-item">Beranda</span>
            </nav>

            <!-- Search Bar -->
            <div class="relative w-full md:w-1/3">
                <input type="text" id="search-input" placeholder="Cari produk..." class="w-full pl-10 pr-4 py-3 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors">
                <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 h-6 w-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                <div id="search-results" class="absolute z-10 w-full mt-2 bg-white border border-gray-200 rounded-md shadow-lg hidden"></div>
            </div>

            <!-- Cart Button -->
            <div class="mt-2 md:mt-0">
                <button id="cart-button" class="relative bg-white text-gray-600 py-3 px-6 rounded-full hover:bg-gray-200 transition-colors duration-200 shadow-md touch-friendly">
                    <svg class="w-6 h-6 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2m7 0h-7l1.38 7.39a2 2 0 00.18.89l3.39 6.21a2 2 0 001.62.96h7.5A2 2 0 0017 18a2 2 0 002-2V9a2 2 0 00-2-2h-3V5a2 2 0 00-2-2a2 2 0 00-2 2v2H7z"></path></svg>
                    Keranjang
                    <span id="cart-count" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full hidden">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="container mx-auto px-4 py-12">

        <!-- Landing Page Section -->
        <section id="landing-page" class="text-center py-24 flex flex-col items-center justify-center">
            <h1 class="text-5xl md:text-6xl font-extrabold text-gray-900 mb-6 leading-tight">Temukan Gaya Anda, <br> Belanja dengan Mudah</h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-2xl mb-10">Jelajahi koleksi pilihan kami untuk menemukan produk yang sesuai dengan kepribadian Anda.</p>
            <button id="start-shopping-btn" class="px-10 py-4 bg-indigo-600 text-white font-semibold rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-300 transform hover:scale-105 touch-friendly">
                Mulai Belanja Sekarang
            </button>
        </section>

        <!-- Home Page Section -->
        <section id="home-page" class="hidden">
            <!-- Filter Section (Moved to the center) -->
            <div class="bg-white p-6 rounded-lg shadow-md max-w-3xl mx-auto mb-8">
                <h3 class="text-xl font-bold mb-4 text-center">Filter Produk</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div id="category-filter">
                        <h4 class="font-semibold text-gray-700 mb-2">Kategori</h4>
                        <!-- Filter options will be injected here -->
                    </div>
                    <div id="price-filter">
                        <h4 class="font-semibold text-gray-700 mb-2">Harga</h4>
                        <input type="range" id="price-range" min="0" max="1000" value="1000" class="w-full accent-indigo-600">
                        <p class="text-sm mt-2 text-gray-600">Maksimal: $<span id="max-price-display">1000</span></p>
                    </div>
                </div>
            </div>

            <!-- Product Grid -->
            <div class="w-full">
                <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Product cards will be injected here -->
                </div>
                <!-- Loading Indicator -->
                <div id="loading" class="text-center py-20">
                    <svg class="animate-spin h-12 w-12 text-indigo-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal for Product Details -->
    <div id="product-modal" class="modal fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 transform scale-0 opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl p-8 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative transform -translate-y-80 transition-transform duration-500">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-900 text-4xl font-light">&times;</button>
            <div id="modal-content">
                <!-- Product details will be injected here -->
            </div>
        </div>
    </div>

    <!-- Modal for Shopping Cart -->
    <div id="cart-modal" class="modal fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 transform scale-0 opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl p-8 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative transform -translate-y-80 transition-transform duration-500">
            <button id="close-cart-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-900 text-4xl font-light">&times;</button>
            <div id="cart-content">
                <h2 class="text-3xl font-bold mb-6 text-center">Keranjang Belanja</h2>
                <div id="cart-items" class="space-y-6">
                    <!-- Cart items will be injected here -->
                </div>
                <div id="cart-summary" class="mt-8 pt-6 border-t-2 border-dashed border-gray-300 text-right font-bold text-2xl">
                    Total: $<span id="cart-total">0.00</span>
                </div>
                <div class="mt-10 text-center">
                    <button id="checkout-btn" class="px-8 py-4 bg-green-600 text-white font-semibold rounded-full shadow-lg hover:bg-green-700 transition-colors duration-300 transform hover:scale-105 touch-friendly">
                        Lanjut ke Pembayaran
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal for Checkout -->
    <div id="checkout-modal" class="modal fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 transform scale-0 opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl p-8 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative transform -translate-y-80 transition-transform duration-500">
            <button id="close-checkout-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-900 text-4xl font-light">&times;</button>
            <div id="checkout-content">
                <h2 class="text-3xl font-bold mb-6 text-center">Checkout</h2>
                <form id="checkout-form" class="space-y-8">
                    <div>
                        <label for="full-name" class="block text-sm font-semibold text-gray-700">Nama Lengkap</label>
                        <input type="text" id="full-name" name="fullName" required class="mt-2 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-semibold text-gray-700">Email</label>
                        <input type="email" id="email" name="email" required class="mt-2 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    <div>
                        <label for="address" class="block text-sm font-semibold text-gray-700">Alamat Lengkap</label>
                        <textarea id="address" name="address" rows="3" required class="mt-2 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"></textarea>
                    </div>
                    
                    <h3 class="text-xl font-bold mt-8">Metode Pembayaran</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <label class="flex items-center p-6 border-2 border-gray-200 rounded-xl shadow-md cursor-pointer hover:bg-gray-50 transition-colors">
                            <input type="radio" name="paymentMethod" value="transfer" class="form-radio text-indigo-600 h-6 w-6" checked>
                            <span class="ml-4 text-lg font-medium text-gray-800">Transfer Bank</span>
                        </label>
                        <label class="flex items-center p-6 border-2 border-gray-200 rounded-xl shadow-md cursor-pointer hover:bg-gray-50 transition-colors">
                            <input type="radio" name="paymentMethod" value="e-wallet" class="form-radio text-indigo-600 h-6 w-6">
                            <span class="ml-4 text-lg font-medium text-gray-800">E-Wallet</span>
                        </label>
                    </div>

                    <div class="text-center pt-8">
                        <button type="submit" class="w-full md:w-auto px-10 py-4 bg-indigo-600 text-white font-semibold rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-300 transform hover:scale-105 touch-friendly">
                            Bayar Sekarang
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Feedback Message (like a toast) -->
    <div id="toast" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-8 py-4 rounded-full shadow-lg z-50 opacity-0 transition-opacity duration-300 hidden">
        <span id="toast-message"></span>
    </div>

    <script>
        const API_URL = 'https://fakestoreapi.com';
        let allProducts = [];
        let cartItems = [];
        let categories = [];

        // --- DOM Elements ---
        const startShoppingBtn = document.getElementById('start-shopping-btn');
        const landingPage = document.getElementById('landing-page');
        const homePage = document.getElementById('home-page');
        const productList = document.getElementById('product-list');
        const loading = document.getElementById('loading');
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');
        const categoryFilter = document.getElementById('category-filter');
        const priceRange = document.getElementById('price-range');
        const maxPriceDisplay = document.getElementById('max-price-display');
        const cartButton = document.getElementById('cart-button');
        const cartCount = document.getElementById('cart-count');
        const cartModal = document.getElementById('cart-modal');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        const closeCartBtn = document.getElementById('close-cart-btn');
        const checkoutBtn = document.getElementById('checkout-btn');
        const checkoutModal = document.getElementById('checkout-modal');
        const closeCheckoutBtn = document.getElementById('close-checkout-btn');
        const productModal = document.getElementById('product-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const modalContent = document.getElementById('modal-content');
        const checkoutForm = document.getElementById('checkout-form');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const breadcrumbs = document.getElementById('breadcrumbs');
        const homeLink = document.getElementById('home-link');

        // --- Core Functions ---

        // Fungsi untuk menampilkan pesan pop-up
        function showToast(message) {
            toastMessage.textContent = message;
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.classList.remove('opacity-0');
                toast.classList.add('opacity-100');
            }, 10);
            setTimeout(() => {
                toast.classList.remove('opacity-100');
                toast.classList.add('opacity-0');
            }, 3000);
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3300);
        }

        // Fetch Data from API
        async function fetchProducts() {
            try {
                const response = await fetch(`${API_URL}/products`);
                allProducts = await response.json();
                renderProducts(allProducts);
                loading.classList.add('hidden');
            } catch (error) {
                console.error("Failed to fetch products:", error);
                showToast("Gagal memuat produk. Silakan coba lagi nanti.");
                loading.innerHTML = '<p class="text-red-500">Gagal memuat produk.</p>';
            }
        }

        async function fetchCategories() {
            try {
                const response = await fetch(`${API_URL}/products/categories`);
                categories = await response.json();
                renderCategories();
            } catch (error) {
                console.error("Failed to fetch categories:", error);
            }
        }
        
        // Render Functions
        function renderProducts(productsToRender) {
            productList.innerHTML = '';
            if (productsToRender.length === 0) {
                productList.innerHTML = '<p class="text-center text-gray-500 col-span-full">Tidak ada produk yang ditemukan.</p>';
                return;
            }
            productsToRender.forEach(product => {
                const productCard = document.createElement('div');
                productCard.classList.add('bg-white', 'rounded-xl', 'shadow-md', 'overflow-hidden', 'transform', 'hover:scale-105', 'transition-transform', 'duration-300', 'cursor-pointer', 'border', 'border-gray-200');
                productCard.innerHTML = `
                    <div class="relative w-full h-56 overflow-hidden bg-gray-100 flex items-center justify-center p-4">
                        <img src="${product.image}" alt="${product.title}" class="object-contain max-h-full max-w-full transform hover:scale-110 transition-transform duration-500">
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-900 truncate mb-1">${product.title}</h3>
                        <p class="text-sm text-gray-500 capitalize mb-2">${product.category}</p>
                        <div class="flex items-center text-yellow-400 mb-2">
                            ${Array(Math.round(product.rating.rate)).fill('<span class="text-lg">&#9733;</span>').join('')}
                            ${Array(5 - Math.round(product.rating.rate)).fill('<span class="text-lg text-gray-300">&#9733;</span>').join('')}
                            <span class="ml-2 text-sm text-gray-500">(${product.rating.count})</span>
                        </div>
                        <p class="text-2xl font-bold text-indigo-600 mb-4">$${product.price}</p>
                        <div class="flex items-center justify-between">
                            <button class="add-to-cart-btn bg-indigo-500 text-white p-3 rounded-full hover:bg-indigo-600 transition-colors duration-200 touch-friendly" data-id="${product.id}">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                            </button>
                            <span class="text-sm text-gray-500 font-medium">Tambah ke Keranjang</span>
                        </div>
                    </div>
                `;
                productCard.querySelector('.add-to-cart-btn').addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent modal from opening
                    addToCart(product.id);
                });
                productCard.addEventListener('click', () => showProductModal(product.id));
                productList.appendChild(productCard);
            });
        }

        function renderCategories() {
            const categoryList = document.createElement('ul');
            categoryList.classList.add('space-y-3');
            const allOption = document.createElement('li');
            allOption.innerHTML = `<label class="inline-flex items-center cursor-pointer">
                <input type="radio" name="category" value="all" checked class="form-radio h-5 w-5 text-indigo-600">
                <span class="ml-3 text-gray-800 font-medium">Semua Produk (${allProducts.length})</span>
            </label>`;
            categoryList.appendChild(allOption);
            categories.forEach(cat => {
                const count = allProducts.filter(p => p.category === cat).length;
                const li = document.createElement('li');
                li.innerHTML = `<label class="inline-flex items-center cursor-pointer">
                    <input type="radio" name="category" value="${cat}" class="form-radio h-5 w-5 text-indigo-600">
                    <span class="ml-3 text-gray-800 capitalize font-medium">${cat} (${count})</span>
                </label>`;
                categoryList.appendChild(li);
            });
            categoryFilter.appendChild(categoryList);
        }

        // --- Page/Modal Management ---
        function showPage(pageId) {
            landingPage.classList.add('hidden');
            homePage.classList.add('hidden');
            if (pageId === 'landing-page') {
                landingPage.classList.remove('hidden');
            } else if (pageId === 'home-page') {
                homePage.classList.remove('hidden');
            }
            updateBreadcrumbs(pageId);
        }

        function showModal(modalElement) {
            modalElement.classList.remove('scale-0', 'opacity-0');
            modalElement.classList.add('scale-100', 'opacity-100');
            // Animate content from above
            modalElement.querySelector('.modal-content').classList.remove('-translate-y-80');
            modalElement.querySelector('.modal-content').classList.add('translate-y-0');
        }

        function hideModal(modalElement) {
            modalElement.querySelector('.modal-content').classList.remove('translate-y-0');
            modalElement.querySelector('.modal-content').classList.add('-translate-y-80');
            setTimeout(() => {
                modalElement.classList.remove('scale-100', 'opacity-100');
                modalElement.classList.add('scale-0', 'opacity-0');
            }, 300);
        }

        // --- Product & Cart Logic ---
        function showProductModal(productId) {
            const product = allProducts.find(p => p.id === productId);
            if (!product) return;

            modalContent.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-start">
                    <!-- Image Gallery -->
                    <div class="w-full overflow-hidden rounded-xl bg-gray-100 flex items-center justify-center p-8">
                        <img src="${product.image}" alt="${product.title}" class="object-contain max-h-full max-w-full">
                    </div>
                    
                    <!-- Product Info -->
                    <div>
                        <h1 class="text-4xl font-bold text-gray-900 mb-2 leading-tight">${product.title}</h1>
                        <p class="text-xl text-gray-500 capitalize mb-4">${product.category}</p>
                        
                        <div class="flex items-center text-yellow-400 mb-4">
                            ${Array(Math.round(product.rating.rate)).fill('<span class="text-2xl">&#9733;</span>').join('')}
                            ${Array(5 - Math.round(product.rating.rate)).fill('<span class="text-2xl text-gray-300">&#9733;</span>').join('')}
                            <span class="ml-2 text-lg text-gray-600">(${product.rating.count} ulasan)</span>
                        </div>
                        
                        <p class="text-4xl font-bold text-indigo-600 mb-6">$${product.price}</p>
                        
                        <h3 class="text-lg font-bold mb-2">Deskripsi Produk</h3>
                        <p class="text-gray-700 mb-8">${product.description}</p>
                        
                        <!-- Add to Cart CTA -->
                        <button id="add-to-cart-modal-btn" class="w-full px-8 py-4 bg-indigo-600 text-white font-semibold rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-300 transform hover:scale-105 touch-friendly" data-id="${product.id}">
                            Tambahkan ke Keranjang
                        </button>
                    </div>
                </div>
            `;
            document.getElementById('add-to-cart-modal-btn').addEventListener('click', () => {
                addToCart(product.id);
                hideModal(productModal);
            });
            showModal(productModal);
        }

        function addToCart(productId) {
            const product = allProducts.find(p => p.id === productId);
            const existingItem = cartItems.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity++;
                showToast(`Kuantitas ${product.title} diperbarui!`);
            } else {
                cartItems.push({ ...product, quantity: 1 });
                showToast(`${product.title} ditambahkan ke keranjang!`);
            }
            updateCartUI();
        }

        function updateCartUI() {
            cartItemsContainer.innerHTML = '';
            let total = 0;
            if (cartItems.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-center text-gray-500 py-8">Keranjang Anda kosong.</p>';
                cartCount.classList.add('hidden');
                cartTotal.textContent = '0.00';
                checkoutBtn.disabled = true;
                checkoutBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                cartCount.textContent = cartItems.length;
                cartCount.classList.remove('hidden');
                checkoutBtn.disabled = false;
                checkoutBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                
                cartItems.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    const cartItemEl = document.createElement('div');
                    cartItemEl.classList.add('flex', 'items-center', 'space-x-6', 'p-4', 'bg-white', 'rounded-lg', 'shadow-sm', 'border', 'border-gray-200');
                    cartItemEl.innerHTML = `
                        <img src="${item.image}" alt="${item.title}" class="w-20 h-20 object-contain rounded-md">
                        <div class="flex-grow">
                            <h4 class="font-bold text-lg">${item.title}</h4>
                            <p class="text-sm text-gray-600">Jumlah: ${item.quantity}</p>
                        </div>
                        <div class="flex flex-col items-end">
                            <p class="font-bold text-indigo-600 text-lg">$${itemTotal.toFixed(2)}</p>
                            <button class="remove-from-cart-btn text-red-500 hover:text-red-700 transition-colors duration-200 text-sm mt-1" data-id="${item.id}">Hapus</button>
                        </div>
                    `;
                    cartItemEl.querySelector('.remove-from-cart-btn').addEventListener('click', () => {
                        if (confirm('Yakin ingin menghapus item ini dari keranjang?')) {
                            removeFromCart(item.id);
                        }
                    });
                    cartItemsContainer.appendChild(cartItemEl);
                });
                cartTotal.textContent = total.toFixed(2);
            }
        }

        function removeFromCart(productId) {
            cartItems = cartItems.filter(item => item.id !== productId);
            updateCartUI();
            showToast('Item berhasil dihapus dari keranjang.');
        }

        function showCheckoutModal() {
            hideModal(cartModal);
            showModal(checkoutModal);
        }

        // --- Event Listeners ---
        startShoppingBtn.addEventListener('click', () => {
            showPage('home-page');
            fetchProducts();
            fetchCategories();
        });

        homeLink.addEventListener('click', (e) => {
            e.preventDefault();
            showPage('landing-page');
            document.getElementById('home-page').classList.add('hidden');
        });

        cartButton.addEventListener('click', () => {
            updateCartUI();
            showModal(cartModal);
        });
        
        closeCartBtn.addEventListener('click', () => hideModal(cartModal));
        closeCheckoutBtn.addEventListener('click', () => hideModal(checkoutModal));
        closeModalBtn.addEventListener('click', () => hideModal(productModal));

        checkoutBtn.addEventListener('click', showCheckoutModal);

        checkoutForm.addEventListener('submit', (e) => {
            e.preventDefault();
            showToast("Pesanan berhasil dikirim! Terima kasih!");
            cartItems = []; // Clear cart after checkout
            updateCartUI();
            hideModal(checkoutModal);
            showPage('landing-page');
        });
        
        // Filter and Search Logic
        let currentFilterCategory = 'all';
        let currentFilterPrice = 1000;

        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const filteredProducts = allProducts.filter(p => p.title.toLowerCase().includes(query) || p.category.toLowerCase().includes(query));
            renderProducts(filteredProducts);
        });

        document.getElementById('category-filter').addEventListener('change', (e) => {
            if (e.target.name === 'category') {
                currentFilterCategory = e.target.value;
                applyFilters();
            }
        });

        priceRange.addEventListener('input', (e) => {
            currentFilterPrice = parseInt(e.target.value);
            maxPriceDisplay.textContent = currentFilterPrice;
            applyFilters();
        });

        function applyFilters() {
            let filtered = allProducts.filter(p => p.price <= currentFilterPrice);
            if (currentFilterCategory !== 'all') {
                filtered = filtered.filter(p => p.category === currentFilterCategory);
            }
            renderProducts(filtered);
        }

        function updateBreadcrumbs(pageId) {
            breadcrumbs.innerHTML = '';
            const home = document.createElement('a');
            home.href = "#";
            home.id = "home-link";
            home.classList.add('breadcrumb-item', 'text-indigo-600', 'hover:underline');
            home.textContent = "Beranda";
            breadcrumbs.appendChild(home);
            
            if (pageId === 'home-page') {
                 const separator = document.createElement('span');
                 separator.classList.add('mx-2', 'text-gray-400');
                 separator.textContent = '/';
                 breadcrumbs.appendChild(separator);

                 const homeProduct = document.createElement('span');
                 homeProduct.classList.add('breadcrumb-item');
                 homeProduct.textContent = "Semua Produk";
                 breadcrumbs.appendChild(homeProduct);
            }
        }
        
        // Initial page load
        showPage('landing-page');
    </script>
</body>
</html>
